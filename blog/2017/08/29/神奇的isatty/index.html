<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>ç¥å¥‡çš„isatty &middot; Hualet Wang</title>

  
  <link rel="stylesheet" href="https://hualet.org/css/poole.css">
  <link rel="stylesheet" href="https://hualet.org/css/hyde.css">
  <link rel="stylesheet" href="https://hualet.org/css/poole-overrides.css">
  <link rel="stylesheet" href="https://hualet.org/css/hyde-overrides.css">
  <link rel="stylesheet" href="https://hualet.org/css/hyde-x.css">
  <link rel="stylesheet" href="https://hualet.org/css/highlight/sunburst.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
  

  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://hualet.org/touch-icon-144-precomposed.png">
  <link href="https://hualet.org/favicon.png" rel="icon">

  
  
  
  

  <meta name="description" content="">
  <meta name="keywords" content="">
  
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-121092907-1', 'auto');
    ga('send', 'pageview');
  </script>
  
</head>
<body>
<div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      
        <img src="https://www.gravatar.com/avatar/d07d3626f19b0a5c353eff86d03d0e8f?s=200"
             alt="gravatar" title="Hualet Wang">
      
      <h1>Hualet Wang</h1>
      <p class="lead">Think in Hualet</p>
    </div>

    <ul class="sidebar-nav">
      <li class="sidebar-nav-item"><a href="https://hualet.org/">Blog</a></li>
      
    </ul>

    <ul class="sidebar-nav">
      <li class="sidebar-nav-item">
      <a href="https://github.com/hualet"><i class="fa fa-github-square fa-3x"></i></a>
      
      
      
      <a href="https://plus.google.com/&#43;%E8%80%80%E5%8D%8E%E7%8E%8B"><i class="fa fa-google-plus-square fa-3x"></i></a>
      
      <a href="https://twitter.com/Hualet"><i class="fa fa-twitter-square fa-3x"></i></a>
      
      <a href="https://hualet.org/index.xml" type="application/rss+xml"><i class="fa fa-rss-square fa-3x"></i></a>
      </li>
    </ul>

    

    <p>Copyright &copy; 2018 <a href="https://hualet.org/license/">License</a><br/>
       Powered by <a href="http://gohugo.io">Hugo</a> and <a href="https://github.com/zyro/hyde-x">Hyde-X</a></p>
  </div>
</div>


<div class="content container">
  <div class="post">
    <h1 class="post-title">ç¥å¥‡çš„isatty</h1>
    <span class="post-date">Aug 29, 2017 &middot; <a href="https://hualet.org/blog/2017/08/29/%E7%A5%9E%E5%A5%87%E7%9A%84isatty/#disqus_thread">Comments</a>
    </span>
    <p>å‰äº›æ—¥å­æ‰ä»apt-getå‘½ä»¤ç³»åˆ—æ¢æˆæ›´ä¸ºæ—¶å°šçš„aptç³»åˆ—ï¼Œä½œä¸ºä¸€ä¸ªdebianç³»å‘è¡Œç‰ˆâ€”â€”deepinçš„å¼€å‘è€…ï¼Œæˆ‘è¡¨ç¤ºå¾ˆæ±—é¢œâ€¦â€¦æ–°çš„aptå‘½ä»¤é™¤äº†åœ¨åŠŸèƒ½ä¸Šå°†apt-getã€apt-cacheç­‰å‡ ä¸ªå‘½ä»¤ç»Ÿä¸€åˆ°äº†ä¸€ä¸ªå‘½ä»¤ä¸Šå¤–ï¼Œæ›´æ˜¯æœ‰äº†ä¸é”™çš„TUIï¼Œå¦‚æ–‡æ¡£æ‰€è¯´ï¼š</p>

<pre><code>The `apt` command is meant to be pleasant for end users and does not need to be backward compatible like apt-get(8).
</code></pre>

<p>æ¯•ç«Ÿï¼Œè¿˜å¤šäº†è¿›åº¦æ¡å‘¢â€¦â€¦ ğŸ˜‚</p>

<p>ä¸è¿‡è¿™ä¸æ˜¯ä»Šå¤©è¦è¯´çš„é‡ç‚¹ï¼Œæ¢åˆ°aptä»¥åï¼ŒæŠŠaptæ“ä½œçš„ä¸€äº›ç»“æœè·Ÿç®¡é“ç»“åˆä¸€èµ·ç”¨ï¼Œç»å¸¸ä¼šæ”¶åˆ°è­¦å‘Šï¼Œä¾‹å¦‚ï¼š</p>

<pre><code>(ssh) hualet@hualet-PC : ~
[0] % apt search deepin | grep -i superstar

WARNING: apt does not have a stable CLI interface. Use with caution in scripts.
</code></pre>

<p>CLIçš„è¾“å‡ºä¹Ÿç®—æ˜¯APIè¦ä¿æŒstableä¹ˆï¼Ÿæ±—é¢œagainâ€¦â€¦dtkä½œä¸ºä¸€ä¸ªç³»ç»Ÿçº§çš„å¼€å‘åº“éƒ½è¿˜æ²¡æœ‰åˆ°stableçš„çŠ¶æ€ã€æŸinå…¬å¸çš„CTOå†™å¾—å‘½ä»¤è¡Œå·¥å…·ï¼Œç¬¬äºŒå¤©æ¥å£å°±å…¨å˜äº†ğŸ˜‚â€¦â€¦æ•¬ç•ä¹‹ä½™ï¼Œå›°æƒ‘æˆ‘çš„å€’ä¸æ˜¯è¿™ä¸ªè­¦å‘Šçš„å†…å®¹ï¼Œæ¯•ç«Ÿæ–°çš„ä¸œè¥¿éƒ½ä¸ä¿è¯ç¨³å®šä¹ˆï¼Œä½†æ˜¯aptæ˜¯æ€ä¹ˆçŸ¥é“å®ƒçš„è¾“å‡ºè¢«è¿åˆ°ç®¡é“äº†å‘¢ï¼Ÿ</p>

<p>ä¸€ç›´æ²¡ç©ºå¤„ç†ï¼Œç›´åˆ°æ˜¨å¤©ï¼Œåˆä¸€æ¬¡é‡åˆ°äº†ï¼Œé‚è®°ä¸‹ï¼Œæ™šä¸Šæ€æ¥æƒ³å»æ²¡ä»€ä¹ˆæƒ³æ³•ï¼Œé‚è¯·æ•™å‰æ–‡æåˆ°çš„ä¸é è°±CTOï¼Œä¸«ç›´æ¥ç”©è¿‡æ¥ä¸€å¥ï¼š</p>

<p>â€œisttyæ£€æµ‹outputå•Šï¼Œå¾ˆå¤šå‘½ä»¤è¡Œç¨‹åºéƒ½ä¼šæ ¹æ®è¿™ä¸ªåšä¸åŒçš„ååº”â€</p>

<p>æˆ‘ï¼šâ€œman isttyæ²¡æœ‰ç»“æœå•Šâ€œ</p>

<p>ä»–ï¼šâ€ä½ man pageæ²¡è£…å…¨å§ï¼Ÿâ€œ</p>

<p>æˆ‘é»˜é»˜æ•²ä¸‹sudo apt install manpages-devï¼Œæ˜¾ç¤ºå·²ç»å®‰è£…äº†â€¦â€¦</p>

<p>æˆ‘ï¼šâ€œè£…å…¨äº†å•Šï¼Œæˆ‘Googleä¸€ä¸‹å§â€</p>

<p>ä»–ï¼šâ€œè‚¯å®šæ²¡è£…å…¨ï¼Œåº”è¯¥æ˜¯åœ¨libbsdæˆ–è€…termiosé‡Œçš„å§â€¦â€¦â€œ ä¿¡èª“æ—¦æ—¦ã€‚</p>

<p>æˆ‘é»˜é»˜Googleäº†ä¸€åœˆï¼Œå‘ç°é‚£ä¸ªå‡½æ•°å…¶å®å«isattyï¼Œåœ¨unistd.hé‡Œé¢å®šä¹‰</p>

<p>æˆ‘ï¼šâ€œä½ æ˜¯ä¸æ˜¯è®°é”™äº†ï¼Œæœ‰isattyï¼Œunistd.hé‡Œé¢çš„â€¦â€¦â€</p>

<p>ä»–ï¼šâ€œæ©é¢â€</p>

<p>å°±æ˜¯è¿™ä¹ˆä¸é è°±ä¸€äººâ€¦â€¦</p>

<p>çŸ¥é“äº†isattyï¼Œå†™äº†ä¸€ä¸ªç¨‹åºæµ‹è¯•ä¸€ä¸‹ï¼š</p>

<pre><code>#include&lt;unistd.h&gt;
#include&lt;stdio.h&gt;

int main(int argc, char** argv) {
  printf(&quot;%d&quot;, isatty(1)); // 1 æ˜¯ç‰¹æ®Šçš„fdï¼Œä»£è¡¨æ ‡å‡†è¾“å‡º
}
</code></pre>

<p>æ²¡æŒ‚ç®¡é“çš„è¯è¾“å‡ºæ˜¯1ï¼ŒæŒ‚äº†ç®¡é“è¾“å‡ºæ˜¯0ã€‚å°±æ˜¯è¿™ä¹ˆç¥å¥‡ï¼Œåªæ€ªè‡ªå·±å¯¹POSIXçš„æ ‡å‡†å‡½æ•°éƒ½è¿™ä¹ˆç”Ÿç–ï¼Œå†æ¬¡æ±—é¢œâ€¦â€¦æ˜¯æ—¶å€™ç¿»ç¿»TUPEäº†ã€‚</p>

<p>æœ‰å…´è¶£çœ‹isattyæ˜¯ä»€ä¹ˆåŸç†çš„ï¼Œå¯ä»¥çœ‹çœ‹appleçš„<a href="https://opensource.apple.com/source/Libc/Libc-167/gen.subproj/isatty.c">å®ç°</a>ã€‚</p>

<p>å‚è€ƒé“¾æ¥ï¼š</p>

<p>[1], <a href="https://superuser.com/a/932170">How does isatty() get the information from the terminal?</a></p>

  </div>
  <div id="disqus_thread"></div>
</div>


<script type="text/javascript">
var disqus_shortname = "Zwpa7VvDyo";
(function () {
    var s = document.createElement('script'); s.async = true;
    s.type = 'text/javascript';
    s.src = '//' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
}());
</script>



<script type="text/javascript">
    var disqus_shortname = "Zwpa7VvDyo";
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

<script src="https://hualet.org/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
</body>
</html>

